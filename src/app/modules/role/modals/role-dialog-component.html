<section
  fxFlexFill
  fxLayout="row"
  fxLayoutAlign="space-between center"
>
  <form #formDirective="ngForm"
        (ngSubmit)="submitForm()"
        [formGroup]="roleService.form"
  >
    <h1 class="dialog-header" mat-dialog-title>
      {{ roleService.form.controls['uuid'].value ? "Edit Role" : "Create Role" }}
    </h1>
    <mat-divider></mat-divider>
    <mat-dialog-content>
      <div class="dialog-content" fxLayout="column">
        <div fxLayout="row">
          <mat-form-field fxFlex="50">
            <mat-label>Name</mat-label>
            <input autocomplete="off"
                   formControlName="name"
                   matInput
                   maxlength="255"
                   placeholder="Enter name" required>
          </mat-form-field>

          <mat-form-field fxFlex="50">
            <mat-label>Code</mat-label>
            <input autocomplete="off"
                   formControlName="code"
                   matInput
                   maxlength="255"
                   placeholder="Enter code" required>
          </mat-form-field>
        </div>

        <div fxLayout="column" fxLayoutAlign="stretch">
          <mat-form-field>
            <mat-label>Description</mat-label>
            <textarea
              formControlName="description"
              matInput
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="1"
              cdkAutosizeMaxRows="5">
          </textarea>
          </mat-form-field>
        </div>
        <!--        Picklist goes here-->
        <p-pickList
          [source]="availableAuthorities"
          [target]="assignedAuthorities"
          sourceHeader="Available"
          targetHeader="Selected"
          [dragdrop]="true"
          [responsive]="true"
          [sourceStyle]="{ height: '30rem' }"
          [targetStyle]="{ height: '30rem' }"
          breakpoint="1400px">
          <ng-template let-authority pTemplate="item">
            <div class="flex flex-wrap p-2 align-items-center gap-3">
              <div class="flex-1 flex flex-column gap-2">
                <span class="font-bold">Name: {{ authority.name }}</span>
                <div class="flex align-items-center gap-2">
                  <i class="pi pi-tag text-sm"></i>
                  <span>
                    Resource: {{ authority.resource }}
                  </span>
                </div>
              </div>
              <span class="font-bold text-900">
                    Action: {{ authority.action }}
                </span>
            </div>
          </ng-template>
        </p-pickList>
        <!--        Picklist ends here-->
      </div>
    </mat-dialog-content>
    <mat-dialog-actions fxLayout="row" fxLayoutAlign="end stretch">
      <div class="button">
        <button mat-dialog-close mat-raised-button type="button">CANCEL</button>
        <button color="primary" mat-raised-button type="submit">
          {{ roleService.form.controls['uuid'].value ? "UPDATE" : "CREATE" }}
        </button>
      </div>
    </mat-dialog-actions>
  </form>
</section>

<!--<pre>Form Values: {{ roleService.form.value | json }}</pre>-->
